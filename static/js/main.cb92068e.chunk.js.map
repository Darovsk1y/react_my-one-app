{"version":3,"sources":["components/Asside/Menu/Menu-nav.module.css","components/Header/Header.module.css","redux/auth_reducer.js","reportWebVitals.js","components/Header/Auth/Auth.jsx","components/Header/Auth/AuthContainer.jsx","components/Header/Header.jsx","components/Asside/Menu/Menu-nav.jsx","components/Asside/Friends/Friend/Friend.jsx","components/Asside/Friends/Friends.jsx","components/Asside/Friends/FriendsContainer.jsx","components/Asside/Asside.jsx","redux/app_reducer.js","redux/asside_reducer.js","redux/redux_store.js","components/global/GlobalError/GlobalError.jsx","App.js","index.js","components/global/GlobalError/GlobalError.module.css","components/Asside/Friends/Friend/Friend.module.css","components/Asside/Friends/Friends.module.css","assets/Spin-1s-200px.svg","components/global/Preloader/preloader.jsx","components/global/Preloader/preloader.module.css","redux/profile_reducer.js","api/api.js","redux/dialogs_reducer.js","utils/validators/object-helpers.js","redux/users_reducer.js","components/Asside/Asside.module.css"],"names":["module","exports","SET_USER_DATA","SET_AUTH_USER_PROFILE","GET_CAPTCHA_URL_SUCCESS","intialState","id","email","login","isAuth","activeUser","captchaUrl","setAuthUserData","type","data","getCaptchaUrlSuccsess","authMeThunk","dispatch","a","authAPI","authMeApi","response","resultCode","authMeGetProfileApi","responseProfile","authLoginThunk","password","rememberMe","captcha","autchMeLoginApi","getCaptchaUrlThunk","message","messages","length","stopSubmit","_error","LogoutThunk","LogoutApi","securityAPI","getCaptchaUrl","responce","url","authReduser","state","action","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","Auth","props","className","s","loginBlock","authLine","logout","onClick","onOut","to","AuthContainer","this","React","Component","connect","auth","Header","header","src","alt","setActive","navLink","isActive","active","Menu","menu","list","li","findusers","Friend","friend","href","item","image","name","Friends","frendsItems","friends","map","online","body","title","FriendsContainer","asside","Asside","INITIALIZE_APP","SAVED_GLOGAL_ERROR","CLEAR_GLOGAL_ERROR","initialized","globalError","appReducer","error","initialState","assideReducer","reducersPack","combineReducers","profile","profileReducer","dialogs","dialogsReducer","users","usersReducer","form","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","__store__","GlobalError","clearError","popup","popupContent","popupBody","popupBlock","popupClose","Profile","lazy","DialogsContainer","News","Muzic","Settings","UsersContainer","LoginContainer","App","catchAllUnhandleErrors","PromiseRejectionEvent","handlingGlobalErrorThunk","clearGlobalErrorThunk","initializeAppThunk","addEventListener","removeEventListener","role","fallback","path","element","AppContainer","promise","Promise","all","reason","String","document","classList","add","remove","GlobalApp","basename","process","ReactDOM","render","getElementById","Preloader","block","fetching","preloader","ADD_POST","SET_USER_PROFILE","SET_STATUS","DELETE_POST","SAVE_PHOTO","posts","likes","avatar","text","link","status","newPostActionCreator","setStatus","getProfileThusk","userId","profileAPI","getProfile","setStatusThusk","getStatus","updateStatusThusk","updateStatus","savePhotoThunk","photo","updateAvatar","photos","setFormThunk","formData","getState","setForm","reject","newPost","fullName","large","alert","filter","p","instance","require","create","baseURL","withCredentials","headers","usersAPI","getUsers","activePage","pageSize","get","put","FormData","append","followAPI","unfollowApi","delete","followApi","post","ADD_MESSAGE","position","newMessageActionCreator","newMessage","mapItemsUpdateHelper","items","keys","itemId","newObjectProps","u","FOLLOW","UNFOLLOW","SET_USERS","SET_ACTIVE_PAGE","SET_TOTAL_USERS_COUNT","TOGGEL_FETCHING","FOLLOWING_DISABLE","totalUsersCount","isfetching","isDisabled","maxbaselight","setUsers","follow","userid","unfollow","setActivePage","page","toggelFetching","toggelFollowDisable","getUsersThunk","usersCount","totalCount","getUsersActivePageThunk","followUnfollowFlow","apiMethod","actionCreator","followThunk","bind","unfollowThunk","followed"],"mappings":";kGACAA,EAAOC,QAAU,CAAC,KAAO,uBAAuB,KAAO,uBAAuB,GAAK,qBAAqB,OAAS,yBAAyB,UAAY,8B,+DCAtJD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,WAAa,2BAA2B,SAAW,yBAAyB,MAAQ,sBAAsB,OAAS,yB,uLCC/JC,EAAgB,sCAChBC,EAAwB,8CACxBC,EAA0B,gDAE5BC,EAAc,CACjBC,GAAI,KACJC,MAAO,KACPC,MAAO,KACPC,QAAQ,EACRC,WAAY,KACZC,WAAY,MAyBAC,EAAkB,SAACN,EAAIC,EAAOC,EAAOC,GACjD,MAAO,CACNI,KAAMX,EACNY,KAAM,CAACR,KAAIC,QAAOC,QAAOC,YASdM,EAAwB,SAACJ,GACrC,MAAO,CACNE,KAAMT,EACNU,KAAM,CAACH,gBAIIK,EAAc,WAC1B,8CAAO,WAAOC,GAAP,yBAAAC,EAAA,sEACeC,IAAQC,YADvB,UAGsB,KAFxBC,EADE,QAGOC,WAHP,yCAIyBD,EAASP,MAAjCR,EAJD,EAICA,GAAIC,EAJL,EAIKA,MAAOC,EAJZ,EAIYA,MAChBS,EAASL,EAAgBN,EAAIC,EAAOC,GAAO,IALvC,SAMwBW,IAAQI,oBAAoBF,EAASP,KAAKR,IANlE,QAMAkB,EANA,SAQHP,EArBG,CACNJ,KAAMV,EACNW,KAAM,CAACJ,WAmBwBc,KARzB,4CAAP,uDAeYC,EAAiB,SAAClB,EAAOmB,EAAUC,EAAYC,GAC3D,8CAAO,WAAOX,GAAP,iBAAAC,EAAA,sEACeC,IAAQU,gBAAgBtB,EAAOmB,EAAUC,EAAYC,GADpE,OAEsB,KADxBP,EADE,QAEOC,WACXL,EAASD,MAGmB,KAAxBK,EAASC,YACZL,EAASa,KAENC,EAAUV,EAASW,SAASC,OAAS,EAAKZ,EAASW,SAAS,GAAK,aACrEf,EAASiB,YAAW,QAAS,CAACC,OAAQJ,MAVlC,2CAAP,uDAcYK,EAAc,WAC1B,8CAAO,WAAOnB,GAAP,SAAAC,EAAA,sEACeC,IAAQkB,YADvB,OAE2B,IAF3B,OAEOvB,KAAKQ,YAChBL,EAASL,EAAgB,KAAM,KAAM,MAAM,IAHvC,2CAAP,uDAQYkB,EAAqB,yDAAM,WAAOb,GAAP,iBAAAC,EAAA,sEAChBoB,IAAYC,gBADI,OACjCC,EADiC,OAGjC7B,EAAa6B,EAAS1B,KAAK2B,IACjCxB,EAASF,EAAsBJ,IAJQ,2CAAN,uDAQnB+B,IAzFK,WAAkC,IAAjCC,EAAgC,uDAAxBtC,EAAauC,EAAW,uCACpD,OAAQA,EAAO/B,MACd,KAAKX,EAKL,KAAKE,EAKL,KAAKD,EACJ,OAAO,2BACHwC,GAAUC,EAAO9B,MAGtB,QACC,OAAO6B,K,6ECrBKE,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,+BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,O,yFCSCQ,EAbJ,SAACC,GACV,OACE,qBAAKC,UAAWC,IAAEC,WAAlB,SACDH,EAAM9C,OACP,sBAAK+C,UAAWC,IAAEE,SAAlB,UACC,wBAAQH,UAAWC,IAAEG,OAAQC,QAASN,EAAMO,MAA5C,qBACA,sBAAKN,UAAWC,IAAEjD,MAAlB,mBAAgC+C,EAAM/C,YAGvC,cAAC,IAAD,CAASuD,GAAI,SAAb,yB,gBCPIC,E,4MAELF,MAAQ,WACP,EAAKP,MAAMnB,e,4CAEZ,WACC,OAAO,cAAC,EAAD,2BAAU6B,KAAKV,OAAf,IAAsBO,MAAOG,KAAKH,a,GANfI,IAAMC,WAenBC,eANO,SAACzB,GAAD,MAAW,CAChCnC,MAAOmC,EAAM0B,KAAK7D,MAClBC,OAAQkC,EAAM0B,KAAK5D,OACnBC,WAAYiC,EAAM0B,KAAK3D,cAGgB,CAAC0B,iBAA1BgC,CAAwCJ,GCPxCM,EAXA,WACb,OACE,yBAAQd,UAAWC,IAAEc,OAArB,UACE,qBACEC,IAAI,0FACJC,IAAI,KACV,cAAC,EAAD,Q,iBCNIC,EAAY,SAACC,GAAD,OAAaA,EAAQC,SAAWnB,IAAEoB,OAAS,IA4B9CC,EA3BF,WACX,OACE,qBAAKtB,UAAWC,IAAEsB,KAAlB,SACE,qBAAIvB,UAAWC,IAAEuB,KAAjB,UACE,oBAAIxB,UAAWC,IAAEwB,GAAjB,SACE,cAAC,IAAD,CAASlB,GAAG,WAAWP,UAAakB,EAApC,uBAEF,oBAAIlB,UAAWC,IAAEwB,GAAjB,SACE,cAAC,IAAD,CAASlB,GAAG,WAAWP,UAAakB,EAApC,wBAEF,oBAAIlB,UAAWC,IAAEwB,GAAjB,SACE,cAAC,IAAD,CAASlB,GAAG,QAAQP,UAAakB,EAAjC,oBAEF,oBAAIlB,UAAWC,IAAEwB,GAAjB,SACE,cAAC,IAAD,CAASlB,GAAG,SAASP,UAAakB,EAAlC,qBAEF,oBAAIlB,UAAWC,IAAEwB,GAAjB,SACE,cAAC,IAAD,CAASlB,GAAG,YAAYP,UAAakB,EAArC,wBAEF,oBAAIlB,UAAWC,IAAEwB,GAAK,IAAKxB,IAAEyB,UAA7B,SAEE,cAAC,IAAD,CAASnB,GAAG,SAASP,UAAakB,EAAlC,gC,mDCPKS,EAfA,SAAC5B,GACd,OACE,oBAAIC,UAAWC,IAAE2B,OAAjB,SACE,oBAAGC,KAAK,KAAK7B,UAAWC,IAAE6B,KAA1B,UACE,qBAAK9B,UAAWC,IAAE8B,MAAlB,SACE,qBACEf,IAAKjB,EAAMgC,MACXd,IAAI,OAGR,qBAAKjB,UAAWC,IAAE+B,KAAlB,SAAyBjC,EAAMiC,aCSxBC,EAjBC,SAAClC,GAChB,IAAImC,EAAcnC,EAAMoC,QAAQC,KAAK,SAACR,GACrC,OACC,cAAC,EAAD,CACEG,MAAOH,EAAOG,MACdC,KAAMJ,EAAOI,KACbK,OAAQT,EAAOS,QAHJT,EAAO9E,OAOrB,OACE,sBAAKkD,UAAWC,IAAEqC,KAAlB,UACE,qBAAKtC,UAAWC,IAAEsC,MAAlB,qBACA,oBAAIvC,UAAWC,IAAEuB,KAAjB,SAAwBU,QCNfM,EAHU5B,aALH,SAACzB,GACtB,MAAO,CACNgD,QAAShD,EAAMsD,OAAON,WAGCvB,CAErBqB,GCGWS,EATA,SAAC3C,GAEd,OACE,sBAAKC,UAAWC,IAAEwC,OAAlB,UACE,cAAC,EAAD,IACH,cAAC,EAAD,Q,OCPGE,EAAiB,sCACjBC,EAAqB,0CACrBC,EAAqB,0CAEvBhG,EAAc,CACjBiG,aAAa,EACbC,YAAa,MAkECC,EAhEI,WAAkC,IAAjC7D,EAAgC,uDAAxBtC,EAAauC,EAAW,uCACnD,OAAQA,EAAO/B,MACd,KAAKsF,EACJ,OAAO,2BACHxD,GADJ,IAEC2D,aAAa,IAGf,KAAKF,EACJ,OAAO,2BACHzD,GADJ,IAEC4D,YAAa3D,EAAO6D,QAGtB,KAAKJ,EACJ,OAAO,2BACH1D,GADJ,IAEC4D,YAAa,OAGf,QACA,OAAO5D,I,gCC9BL+D,EAAe,CAClBf,QAAS,CACR,CACCrF,GAAI,IACJkF,KAAM,SACND,MAAO,wDACPM,OAAQ,MAET,CACCvF,GAAI,IACJkF,KAAM,gBACND,MACC,uIACDM,OAAQ,OAET,CACCvF,GAAI,IACJkF,KAAM,YACND,MACC,2EACDM,OAAQ,MAET,CACCvF,GAAI,IACJkF,KAAM,eACND,MACC,uIACDM,OAAQ,OAET,CACCvF,GAAI,IACJkF,KAAM,gBACND,MACC,uIACDM,OAAQ,QASIc,EAJM,WAAiC,IAAhChE,EAA+B,uDAAvB+D,EAE7B,OAAO/D,G,wBC9BJiE,EAAeC,YAAgB,CAClCC,QAASC,IACTC,QAASC,IACThB,OAAQU,EACRO,MAAOC,IACP9C,KAAM3B,IACN0E,KAAMC,IACNC,IAAKd,IAGAe,EAAmBC,OAAOC,sCAAwCC,IAClEC,GAAQC,YAAYhB,EAAcW,EAAiBM,YAAgBC,OAGzEN,OAAOO,UAAYJ,GAEJA,U,oBCbAK,GAbK,SAAC,GAA+B,IAA9BzB,EAA6B,EAA7BA,YAAa0B,EAAgB,EAAhBA,WACjC,OACD,qBAAKzE,UAAWC,KAAEyE,MAAlB,SACA,qBAAK1E,UAAWC,KAAE0E,aAAlB,SACE,sBAAK3E,UAAWC,KAAE2E,UAAlB,UACD,qBAAK5E,UAAWC,KAAE4E,WAAlB,SAA+B9B,IAC/B,qBAAK/C,UAAWC,KAAE6E,WAAYzE,QAASoE,YCKnCM,GAAUrE,IAAMsE,MAAK,kBAAM,uDAC3BC,GAAmBvE,IAAMsE,MAAK,kBAAM,uDACpCE,GAAOxE,IAAMsE,MAAK,kBAAM,iCACxBG,GAAQzE,IAAMsE,MAAK,kBAAM,iCACzBI,GAAW1E,IAAMsE,MAAK,kBAAM,kCAC5BK,GAAiB3E,IAAMsE,MAAK,kBAAM,iCAClCM,GAAiB5E,IAAMsE,MAAK,kBAAM,uDAGlCO,G,4MACLC,uBAAyB,SAACC,GAEzB,EAAK1F,MAAM2F,yBAAyBD,I,EAErChB,WAAa,WACZ,EAAK1E,MAAM4F,yB,uDAEZ,WAEClF,KAAKV,MAAM6F,qBAEX5B,OAAO6B,iBAAiB,qBAAsBpF,KAAK+E,0B,kCAEpD,WACCxB,OAAO8B,oBAAoB,qBAAsBrF,KAAK+E,0B,oBAEvD,WACC,OAAI/E,KAAKV,MAAM+C,YAEd,sBAAK9C,UAAU,cAAc+F,KAAK,OAAlC,UACC,cAAC,EAAD,IACA,cAAC,EAAD,IACA,sBAAM/F,UAAU,OAAhB,SACC,cAAC,WAAD,CAAUgG,SAAU,cAAC,IAAD,IAApB,SACC,eAAC,IAAD,WACC,cAAC,IAAD,CAAOC,KAAK,IAAIC,QAAS,cAAC,IAAD,CAAU3F,GAAI,eACvC,cAAC,IAAD,CAAO0F,KAAK,aAAaC,QAAS,cAACnB,GAAD,MAClC,cAAC,IAAD,CAAOkB,KAAK,aAAaC,QAAS,cAACjB,GAAD,MAClC,cAAC,IAAD,CAAOgB,KAAK,UAAUC,QAAS,cAAChB,GAAD,MAC/B,cAAC,IAAD,CAAOe,KAAK,WAAWC,QAAS,cAACf,GAAD,MAChC,cAAC,IAAD,CAAOc,KAAK,cAAcC,QAAS,cAACd,GAAD,MACnC,cAAC,IAAD,CAAOa,KAAK,WAAWC,QAAS,cAACb,GAAD,MAChC,cAAC,IAAD,CAAOY,KAAK,WAAWC,QAAS,cAACZ,GAAD,aAKjC7E,KAAKV,MAAMgD,YAAe,cAAC,GAAD,CAAaA,YAAatC,KAAKV,MAAMgD,YAAa0B,WAAYhE,KAAKgE,aAAgB,MApB9E,cAAC,IAAD,Q,GAlBnB9D,aA+CZwF,GAAevF,aAJK,SAACzB,GAAD,MAAY,CACrC2D,YAAa3D,EAAM2E,IAAIhB,YACvBC,YAAa5D,EAAM2E,IAAIf,eAEwB,CAAC6C,mBJdf,kBAAM,SAACnI,GACxC,IAAM2I,EAAU3I,EAASD,eAEzB6I,QAAQC,IAAI,CAACF,IACZ5G,MAAM,WACN/B,EAxBM,CACNJ,KAAKsF,SIgC8D+C,yBJL7B,SAACD,GAAD,OAA2B,SAAChI,GACnE,IAAM8I,EAASC,OAAOf,EAAsBc,QAC5C9I,EAzBO,CACNJ,KAAMuF,EACNK,MAuByBsD,IAdIE,SAASnE,KAAKoE,UAAUC,IAAI,WIiBoChB,sBJA1D,kBAAM,SAAClI,GAC3CA,EAvBO,CACNJ,KAAMwF,IAK0B4D,SAASnE,KAAKoE,UAAUE,OAAO,YIgB5ChG,CAAkG2E,IAUxGsB,GARC,SAAC9G,GAChB,OACA,cAAC,IAAD,CAAe+G,SAAUC,oBAAzB,SACC,cAAC,IAAD,CAAU5C,MAAOA,GAAjB,SACC,cAACgC,GAAD,SCpEHa,IAASC,OACR,cAAC,GAAD,IACAR,SAASS,eAAe,SAMzB7H,K,mBCdA7C,EAAOC,QAAU,CAAC,MAAQ,2BAA2B,QAAU,6BAA6B,aAAe,kCAAkC,UAAY,+BAA+B,WAAa,gCAAgC,WAAa,kC,mBCAlPD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,KAAO,qBAAqB,MAAQ,sBAAsB,KAAO,uB,mBCAnHD,EAAOC,QAAU,CAAC,KAAO,sBAAsB,MAAQ,uBAAuB,KAAO,wB,qDCDtE,MAA0B,0C,OCS1B0K,IAPC,SAACpH,GACf,OACE,qBAAKC,UAAWC,IAAEmH,MAAlB,SACE,qBAAKpH,UAAWC,IAAEoH,SAAUrG,IAAKsG,EAAWrG,IAAI,S,mBCJtDzE,EAAOC,QAAU,CAAC,MAAQ,yBAAyB,SAAW,8B,qSCExD8K,EAAW,oCACXC,EAAmB,4CACnBC,EAAa,sCACbC,EAAc,uCACdC,EAAa,sCAEfzE,EAAe,CAClB0E,MAAO,CACN,CACC9K,GAAI,EACJ+K,MAAO,IACP7F,KAAM,SACN8F,OAAQ,wDACRC,KAAM,iBACNC,KAAM,MAEP,CACClL,GAAI,EACJ+K,MAAO,IACP7F,KAAM,YACN8F,OACC,2EACDC,KAAM,6EACNC,KAAM,MAEP,CACClL,GAAI,EACJ+K,MAAO,KACP7F,KAAM,kBACN8F,OACC,sGACDC,KAAK,8JACLC,KAAM,OAGR1E,QAAS,KACT2E,OAAQ,IAgDIC,EAAuB,SAACH,GACpC,MAAO,CACN1K,KAAKkK,EACLQ,SASWI,EAAY,SAACF,GACzB,MAAO,CACN5K,KAAKoK,EACLQ,WAiBWG,EAAkB,SAACC,GAC/B,8CAAO,WAAO5K,GAAP,eAAAC,EAAA,sEACW4K,IAAWC,WAAWF,GADjC,QACF/K,EADE,SAILG,GA/B4B6F,EA+BJhG,EAAKA,KA9BxB,CACND,KAAKmK,EACLlE,aAwBM,iCA3BsB,IAACA,IA2BvB,OAAP,uDAQYkF,EAAiB,SAACH,GAC9B,8CAAO,WAAO5K,GAAP,eAAAC,EAAA,sEACW4K,IAAWG,UAAUJ,GADhC,QACF/K,EADE,SAGLG,EAAS0K,EAAU7K,EAAKA,OAHnB,2CAAP,uDAOYoL,EAAoB,SAACT,GACjC,8CAAO,WAAOxK,GAAP,eAAAC,EAAA,sEACW4K,IAAWK,aAAaV,GADnC,QACF3K,EADE,SAGuB,IAAzBA,EAAKA,KAAKQ,YACZL,EAAS0K,EAAUF,IAJf,2CAAP,uDASYW,EAAiB,SAACC,GAC9B,8CAAO,WAAOpL,GAAP,eAAAC,EAAA,sEACW4K,IAAWQ,aAAaD,GADnC,QACFvL,EADE,SAGuB,IAAzBA,EAAKA,KAAKQ,YACZL,GAvC8BsL,EAuCHzL,EAAKA,KAAKA,KAAKyL,OAtCvC,CACL1L,KAAMsK,EACNoB,YAgCM,iCAnCyB,IAACA,IAmC1B,OAAP,uDASYC,EAAe,SAACC,GAE5B,8CAAO,WAAOxL,EAAUyL,GAAjB,mBAAAxL,EAAA,6DACA2K,EAASa,IAAWrI,KAAK/D,GADzB,SAEawL,IAAWa,QAAQF,GAFhC,YAEA3L,EAFA,4BAIuB,IAAzBA,EAAKA,KAAKQ,WAJR,gBAKJL,EAAS2K,EAAgBC,IALrB,8BAOE9J,EAAUjB,EAAKA,KAAKkB,SAASC,OAAS,EAAInB,EAAKA,KAAKkB,SAAS,GAAK,aAExEf,EAASiB,YAAW,UAAW,CAACC,OAAQJ,KATpC,kBAUG8H,QAAQ+C,OAAO7K,IAVlB,4CAAP,yDAiCcgF,IArJO,WAAiC,IAAhCpE,EAA+B,uDAAvB+D,EAAc9D,EAAS,uCACrD,OAAQA,EAAO/B,MACd,KAAKkK,EACJ,GAAIpI,EAAMmE,QAAQ,CACjB,IAAI+F,EAAU,CAEbvM,GAAIqC,EAAMyI,MAAMnJ,OAAQ,EACxBoJ,MAAO,EACP7F,KAAM7C,EAAMmE,QAAQgG,SAAWnK,EAAMmE,QAAQgG,SAAW,WACxDxB,OAAQ3I,EAAMmE,QAAQyF,OAAOQ,MAAQpK,EAAMmE,QAAQyF,OAAOQ,MAAO,8EACjExB,KAAM3I,EAAO2I,KACbC,KAAK,YAAD,OAAc7I,EAAMmE,QAAQ+E,SAEjC,OAAO,2BAAIlJ,GAAX,IACCyI,MAAM,GAAD,mBAAMzI,EAAMyI,OAAZ,CAAmByB,MAGrB,OAAOG,MAAM,oCAEnB,KAAKhC,EACJ,OAAO,2BAAIrI,GAAX,IACCmE,QAASlE,EAAOkE,UAGlB,KAAKmE,EACJ,OAAO,2BAAItI,GAAX,IACC8I,OAAQ7I,EAAO6I,SAGjB,KAAKP,EACJ,OAAO,2BACHvI,GADJ,IAECyI,MAAOzI,EAAMyI,MAAM6B,QAAO,SAAAC,GAAC,OAAIA,EAAE5M,KAAOsC,EAAOtC,QAGjD,KAAK6K,EACJ,kCACIxI,GADJ,IAECmE,QAAQ,2BAAKnE,EAAMmE,SAAZ,IAAqByF,OAAQ3J,EAAO2J,WAG7C,QACC,OAAO5J,K,+BCpFV,8KAEMwK,EAFQC,EAAQ,KAECC,OAAO,CAC7BC,QAAS,gDACTC,iBAAiB,EACjBC,QAAQ,CAAC,UAAW,0CAIRC,EAAW,CACvBC,SADuB,WACmB,IAAhCC,EAA+B,uDAAlB,EAAGC,EAAe,uDAAJ,GACpC,OAAOT,EACNU,IADM,qBACYF,EADZ,kBACgCC,IACtC5K,MAAK,SAAC3B,GACN,OAAOA,EAASP,UAINgL,EAAa,CACzBC,WADyB,SACbzL,GACX,OAAO6M,EACNU,IADM,kBACSvN,KAEjB2L,UALyB,SAKd3L,GACV,OAAO6M,EACNU,IADM,yBACgBvN,KAExB6L,aATyB,SASXV,GACb,OAAO0B,EACNW,IADM,iBACgB,CAACrC,YAEzBa,aAbyB,SAaXD,GAEb,IAAMI,EAAW,IAAIsB,SAGrB,OAFAtB,EAASuB,OAAO,QAAS3B,GAElBc,EACNW,IADM,gBACerB,EAAU,CAC/Be,QAAS,CACP,eAAgB,0BAIpBb,QAzByB,SAyBjB7F,GACP,OAAOqG,EACNW,IADM,UACShH,KAGLmH,EAAY,CACxBC,YADwB,SACX5N,GACZ,OAAO6M,EACNgB,OADM,iBACW7N,IACf0C,MAAK,SAAA3B,GACP,OAAOA,EAASP,SAGlBsN,UARwB,SAQb9N,GACV,OAAO6M,EACNkB,KADM,iBACS/N,IACb0C,MAAK,SAAA3B,GACP,OAAOA,EAASP,UAINK,EAAU,CACtBC,UADsB,WAErB,OAAO+L,EACNU,IADM,WAEJ7K,MAAK,SAAA3B,GACP,OAAOA,EAASP,SAGlBS,oBARsB,SAQDjB,GACpB,OAAO6M,EACNU,IADM,kBACSvN,IACb0C,MAAK,SAAA3B,GACP,OAAOA,EAASP,SAIlBe,gBAhBsB,SAgBLtB,EAAOmB,EAAUC,EAAYC,GAC7C,OAAOuL,EACNkB,KADM,cACc,CAAC9N,QAAOmB,WAAUC,aAAYC,YAClDoB,MAAK,SAAA3B,GACL,OAAOA,EAASP,SAGlBuB,UAvBsB,WAwBrB,OAAO8K,EACNgB,OADM,iBAII7L,EAAc,CAE1BC,cAF0B,WAGzB,OAAO4K,EACNU,IADM,gC,qFC/FHS,EAAc,uCAEhB5H,EAAe,CAClB1E,SAAU,CACT,CACC1B,GAAI,IACJiF,MAAO,wDACPiG,KAAM,KACN+C,SAAU,OACVxM,QAAQ,2PAKT,CACCzB,GAAI,IACJiF,MAAO,wDACPiG,KAAM,KACN+C,SAAU,QACVxM,QAAQ,0EAET,CACCzB,GAAI,IACJiF,MAAO,wDACPiG,KAAM,KACN+C,SAAU,OACVxM,QAAQ,oaAOT,CACCzB,GAAI,IACJiF,MAAO,wDACPiG,KAAM,KACN+C,SAAU,QACVxM,QAAQ,+FAGViF,QAAS,CACR,CACC1G,GAAI,IACJkF,KAAM,SACND,MAAO,wDACPgG,KAAM,uBAEP,CACCjL,GAAI,IACJkF,KAAM,gBACND,MACC,uIACDgG,KAAM,0CAEP,CACCjL,GAAI,IACJkF,KAAM,YACND,MACC,2EACDgG,KAAM,8EAEP,CACCjL,GAAI,IACJkF,KAAM,eACND,MACC,uIACDgG,KAAM,gGAwBIiD,EAA0B,SAACjD,GACvC,MAAO,CACN1K,KAAKyN,EACL/C,SAIatE,IA1BO,WAAiC,IAAhCtE,EAA+B,uDAAvB+D,EAAc9D,EAAS,uCAErD,GAAOA,EAAO/B,OACRyN,EAAL,CACC,IAAIG,EAAa,CAChBnO,GAAI,IACJiF,MAAO,wDACPiG,KAAM,KACN+C,SAAU,QACVxM,QAASa,EAAO2I,MAEjB,OAAO,2BAAI5I,GAAX,IACCX,SAAS,GAAD,mBAAMW,EAAMX,UAAZ,CAAsByM,MAI/B,OAAO9L,I,kNCxFG+L,EAAuB,SAACC,EAAOC,EAAMC,EAAQC,GAEzD,OAAOH,EAAM/I,KAAI,SAAAmJ,GAChB,OAAKA,EAAEH,KAAUC,EACT,2BAAIE,GAAMD,GAEXC,M,OCJHC,EAAS,gCACTC,EAAW,kCACXC,EAAY,mCACZC,EAAkB,yCAClBC,EAAwB,+CACxBC,EAAkB,yCAClBC,EAAoB,2CAEtB5I,EAAe,CAClBQ,MAAO,GACPqI,gBAAiB,EACjB3B,SAAU,GACVD,WAAY,EACZ6B,YAAY,EACZC,WAAY,GACZC,aAAc,IAuGFC,EAAW,SAACzI,GACxB,MAAO,CACNrG,KAAMqO,EACNhI,UAGW0I,EAAS,SAACC,GACtB,MAAO,CACNhP,KAAMmO,EACNa,WAGWC,EAAW,SAACD,GACxB,MAAO,CACNhP,KAAMoO,EACNY,WAGWE,EAAgB,SAACC,GAC7B,MAAO,CACNnP,KAAMsO,EACNa,SASWC,EAAiB,SAACT,GAC9B,MAAO,CACN3O,KAAMwO,EACNG,eAGWU,EAAsB,SAACV,EAAYlP,GAC/C,MAAO,CACNO,KAAMyO,EACNE,aACAlP,OAIW6P,EAAgB,SAACxC,EAAYC,GACzC,8CAAO,WAAO3M,GAAP,eAAAC,EAAA,6DACND,EAASgP,GAAe,IADlB,SAEWxC,IAASC,SAASC,EAAYC,GAFzC,QAEF9M,EAFE,UAILG,EAASgP,GAAe,IACxBhP,EAAS0O,EAAS7O,EAAK6N,QACvB1N,GA3BgCmP,EA2BJtP,EAAKuP,WA1B5B,CACNxP,KAAMuO,EACNgB,iBAkBM,iCArB0B,IAACA,IAqB3B,OAAP,uDAUYE,EAA0B,SAACN,EAAMpC,GAC7C,8CAAO,WAAO3M,GAAP,eAAAC,EAAA,6DACND,EAASgP,GAAe,IACxBhP,EAAS8O,EAAcC,IAFjB,SAGWvC,IAASC,SAASsC,EAAMpC,GAHnC,QAGF9M,EAHE,UAKLG,EAASgP,GAAe,IACxBhP,EAAS0O,EAAS7O,EAAK6N,SANlB,2CAAP,uDAWM4B,EAAkB,uCAAG,WAAOtP,EAAUX,EAAIkQ,EAAWC,GAAhC,SAAAvP,EAAA,6DAC1BD,EAASiP,GAAoB,EAAM5P,IADT,SAETkQ,EAAUlQ,GAFD,OAGF,IAHE,OAGjBgB,YACRL,EAASwP,EAAcnQ,IAExBW,EAASiP,GAAoB,EAAO5P,IANV,2CAAH,4DASZoQ,EAAc,SAACpQ,GAC3B,8CAAO,WAAOW,GAAP,eAAAC,EAAA,sDACFsP,EAAYvC,IAAUG,UAAUuC,KAAK1C,KACzCsC,EAAmBtP,EAAUX,EAAIkQ,EAAWZ,GAFtC,2CAAP,uDAKYgB,EAAgB,SAACtQ,GAC7B,8CAAO,WAAOW,GAAP,eAAAC,EAAA,sDACFsP,EAAYvC,IAAUC,YAAYyC,KAAK1C,KAC3CsC,EAAmBtP,EAAUX,EAAIkQ,EAAWV,GAFtC,2CAAP,uDAKc3I,IA3IM,WAAkC,IAAjCxE,EAAgC,uDAAxB+D,EAAc9D,EAAU,uCACrD,OAAQA,EAAO/B,MACd,KAAKmO,EACJ,OAAO,2BACHrM,GADJ,IAECuE,MAAOwH,EAAqB/L,EAAMuE,MAAO,KAAMtE,EAAOiN,OAAQ,CAACgB,UAAU,MAG3E,KAAK5B,EACJ,OAAO,2BACHtM,GADJ,IAECuE,MAAOwH,EAAqB/L,EAAMuE,MAAO,KAAMtE,EAAOiN,OAAQ,CAACgB,UAAU,MAG3E,KAAK3B,EACJ,OAAO,2BACHvM,GADJ,IAECuE,MAAOtE,EAAOsE,QAGhB,KAAKiI,EACJ,OAAO,2BACHxM,GADJ,IAECgL,WAAY/K,EAAOoN,OAGrB,KAAKZ,EACJ,OAAO,2BACHzM,GADJ,IAEC4M,gBAAiB3M,EAAOwN,aAG1B,KAAKf,EACJ,OAAO,2BACH1M,GADJ,IAEC6M,WAAY5M,EAAO4M,aAGrB,KAAKF,EACJ,OAAO,2BACH3M,GADJ,IAEC8M,WAAY7M,EAAO4M,WAAP,sBAAwB7M,EAAM8M,YAA9B,CAA0C7M,EAAOtC,KAAOqC,EAAM8M,WAAWxC,QAAO,SAAC3M,GAAD,OAAQA,IAAOsC,EAAOtC,QAGpH,QACC,OAAOqC,K,mBCjHV3C,EAAOC,QAAU,CAAC,OAAS,0B","file":"static/js/main.cb92068e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"Menu-nav_menu__2kqxo\",\"list\":\"Menu-nav_list__2KUoV\",\"li\":\"Menu-nav_li__2lfne\",\"active\":\"Menu-nav_active__2p_hy\",\"findusers\":\"Menu-nav_findusers__1q-yy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__YO7wb\",\"loginBlock\":\"Header_loginBlock__32goN\",\"authLine\":\"Header_authLine__LFSw8\",\"login\":\"Header_login__3JuJy\",\"logout\":\"Header_logout__3hDWC\"};","import { stopSubmit } from 'redux-form';\r\nimport { authAPI, securityAPI } from './../api/api';\r\nconst SET_USER_DATA = \"react_my-one-app/auth/SET_USER_DATA\";\r\nconst SET_AUTH_USER_PROFILE = \"react_my-one-app/auth/SET_AUTH_USER_PROFILE\";\r\nconst GET_CAPTCHA_URL_SUCCESS = \"react_my-one-app/auth/GET_CAPTCHA_URL_SUCCESS\";\r\n//пока что капчу мы рассмотрим только для случая логинизации\r\nlet intialState = {\r\n\tid: null,\r\n\temail: null,\r\n\tlogin: null,\r\n\tisAuth: false,\r\n\tactiveUser: null,\r\n\tcaptchaUrl: null,//если пришла капча выведем её в UI\r\n}\r\n\r\nconst authReduser = (state = intialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USER_DATA: {\r\n\t\t\treturn {\r\n\t\t\t\t...state, ...action.data,\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase GET_CAPTCHA_URL_SUCCESS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state, ...action.data,\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SET_AUTH_USER_PROFILE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state, ...action.data,\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const setAuthUserData = (id, email, login, isAuth) => {\r\n\treturn {\r\n\t\ttype: SET_USER_DATA,\r\n\t\tdata: {id, email, login, isAuth},\r\n\t}\r\n}\r\nexport const setAuthUserProfile = (activeUser) => {\r\n\treturn {\r\n\t\ttype: SET_AUTH_USER_PROFILE,\r\n\t\tdata: {activeUser},\r\n\t}\r\n}\r\nexport const getCaptchaUrlSuccsess = (captchaUrl) => {\r\n\treturn {\r\n\t\ttype: GET_CAPTCHA_URL_SUCCESS,\r\n\t\tdata: {captchaUrl},\r\n\t}\r\n}\r\n/* Thinks */\r\nexport const authMeThunk = () => {\r\n\treturn async (dispatch) => {\r\n\t\tlet response = await authAPI.authMeApi();\r\n\t\r\n\t\t\tif(response.resultCode === 0){\r\n\t\t\t\tlet {id, email, login} = {...response.data}\r\n\t\t\t\tdispatch(setAuthUserData(id, email, login, true));\r\n\t\t\t\tlet responseProfile = await authAPI.authMeGetProfileApi(response.data.id);\r\n\t\t\t\tif(responseProfile) {\r\n\t\t\t\t\tdispatch(setAuthUserProfile(responseProfile));\r\n\t\t\t\t\t//? Тут мы получиши профайл пользователя\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t}\r\n}\r\n/* Авторизация на нашем сайте */\r\nexport const authLoginThunk = (email, password, rememberMe, captcha) => {\r\n\treturn async (dispatch) => {\r\n\t\tlet response = await authAPI.autchMeLoginApi(email, password, rememberMe, captcha);\r\n\t\t\tif(response.resultCode === 0){ /* Если я залогинен то запустить Санку Авторизации моих данных */\r\n\t\t\t\tdispatch(authMeThunk());\r\n\t\t\t} else {\r\n\t\t\t\t/* dispatch(getCaptchaUrlThunk()); */\r\n\t\t\t\tif (response.resultCode === 10){/* когда будет капча */\r\n\t\t\t\t\tdispatch(getCaptchaUrlThunk());\r\n\t\t\t\t} \r\n\t\t\t\tlet message = response.messages.length > 0 ?  response.messages[0] : \"Some error\";\r\n\t\t\t\tdispatch(stopSubmit(\"login\", {_error: message}));\r\n\t\t\t}\r\n\t}\r\n}\r\nexport const LogoutThunk = () => {\r\n\treturn async (dispatch) => {\r\n\t\tlet response = await authAPI.LogoutApi();\r\n\t\t\tif(response.data.resultCode === 0){\r\n\t\t\t\tdispatch(setAuthUserData(null, null, null, false));\r\n\t\t\t}\r\n\t}\r\n}\r\n/* Captcha */\r\nexport const getCaptchaUrlThunk = () => async (dispatch) =>{\r\n\tconst responce = await securityAPI.getCaptchaUrl();\r\n\t//вернется по любому. см.докум на сервере. проверка не нужна\r\n\tconst captchaUrl = responce.data.url;\r\n\tdispatch(getCaptchaUrlSuccsess(captchaUrl));\r\n}\r\n\r\n\r\nexport default authReduser;","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import s from \"./../Header.module.css\";\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nlet Auth = (props) => {\r\n  return (\r\n    <div className={s.loginBlock}>\r\n\t\t{props.isAuth ? \r\n\t\t<div className={s.authLine}>\r\n\t\t\t<button className={s.logout} onClick={props.onOut}>Log out</button>\r\n\t\t\t<div className={s.login}>User: {props.login}</div>\r\n\t\t</div>\r\n\t\t : \r\n\t\t<NavLink to={\"/login\"}>Login Up</NavLink>}\r\n    </div>\r\n  );\r\n};\r\nexport default Auth;","import React from 'react';\r\nimport Auth from './Auth';\r\nimport { connect } from 'react-redux';\r\nimport { LogoutThunk } from './../../../redux/auth_reducer';\r\n\r\nclass AuthContainer extends React.Component {\r\n\t\r\n\tonOut = () =>{\r\n\t\tthis.props.LogoutThunk();\r\n\t}\r\n\trender () {\r\n\t\treturn <Auth {...this.props} onOut={this.onOut}/>\r\n\t}\r\n}\r\nlet mapStateToProps = (state) =>({\r\n\tlogin: state.auth.login,\r\n\tisAuth: state.auth.isAuth,\r\n\tactiveUser: state.auth.activeUser,\r\n})\r\n\r\nexport default connect(mapStateToProps, {LogoutThunk})(AuthContainer);","import s from \"./Header.module.css\";\r\nimport AuthContainer from './Auth/AuthContainer';\r\nconst Header = () => {\r\n  return (\r\n    <header className={s.header}>\r\n      <img\r\n        src=\"https://bnetcmsus-a.akamaihd.net/cms/template_resource/fh/FHSCSCG9CXOC1462229977849.png\"\r\n        alt=\"\"></img>\r\n\t\t<AuthContainer />\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import s from \"./Menu-nav.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nconst setActive = (navLink) => navLink.isActive ? s.active : '';\r\nconst Menu = () => {\r\n  return (\r\n    <nav className={s.menu}>\r\n      <ul className={s.list}>\r\n        <li className={s.li}>\r\n          <NavLink to=\"/profile\" className = {setActive}>Profile</NavLink>\r\n        </li>\r\n        <li className={s.li}>\r\n          <NavLink to=\"/dialogs\" className = {setActive}>Messages</NavLink>\r\n        </li>\r\n        <li className={s.li}>\r\n          <NavLink to=\"/news\" className = {setActive}>News</NavLink>\r\n        </li>\r\n        <li className={s.li}>\r\n          <NavLink to=\"/music\" className = {setActive}>Muzic</NavLink>\r\n        </li>\r\n        <li className={s.li}>\r\n          <NavLink to=\"/settings\" className = {setActive}>Settings</NavLink>\r\n        </li>\r\n        <li className={s.li + \" \"+ s.findusers}>\r\n\t\t{/* <a href=\"/users\" className={s.findusers}>Find users</a> */}\r\n          <NavLink to=\"/users\" className = {setActive}>Find users</NavLink>\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\nexport default Menu;\r\n","import s from \"./Friend.module.css\";\r\n\r\nconst Friend = (props) => {\r\n  return (\r\n    <li className={s.friend}>\r\n      <a href=\"#/\" className={s.item}>\r\n        <div className={s.image}>\r\n          <img\r\n            src={props.image}\r\n            alt=\"\"\r\n          ></img>\r\n        </div>\r\n        <div className={s.name}>{props.name}</div>\r\n      </a>\r\n    </li>\r\n  );\r\n};\r\nexport default Friend;\r\n","import s from \"./Friends.module.css\";\r\nimport Friend from './Friend/Friend';\r\n\r\n\r\nconst Friends = (props) => {\r\n\tlet frendsItems = props.friends.map( (friend) => {\r\n\t\treturn (\r\n\t\t\t<Friend key={friend.id}\r\n\t\t\t\t\timage={friend.image}\r\n\t\t\t\t\tname={friend.name}\r\n\t\t\t\t\tonline={friend.online}\r\n\t\t\t/>\r\n\t\t);\r\n\t});\r\n  return (\r\n    <div className={s.body}>\r\n      <div className={s.title}>Friends</div>\r\n      <ul className={s.list}>{frendsItems}</ul>\r\n    </div>\r\n  );\r\n};\r\nexport default Friends;\r\n","import { connect } from \"react-redux\";\r\nimport Friends from './Friends';\r\n\r\nlet mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tfriends: state.asside.friends,\r\n\t}\r\n}\r\nconst FriendsContainer = connect(\r\n\tmapStateToProps\r\n  )(Friends);\r\nexport default FriendsContainer;\r\n","import Menu from \"./Menu/Menu-nav\";\r\nimport s from \"./Asside.module.css\";\r\nimport FriendsContainer from './Friends/FriendsContainer';\r\n\r\nconst Asside = (props) => {\r\n\r\n  return (\r\n    <div className={s.asside}>\r\n      <Menu />\r\n\t  <FriendsContainer />\r\n    </div>\r\n  );\r\n};\r\nexport default Asside;\r\n","\r\nimport { authMeThunk } from './auth_reducer';\r\nconst INITIALIZE_APP = \"react_my-one-app/app/INITIALIZE_APP\";\r\nconst SAVED_GLOGAL_ERROR = \"react_my-one-app/app/SAVED_GLOGAL_ERROR\";\r\nconst CLEAR_GLOGAL_ERROR = \"react_my-one-app/app/CLEAR_GLOGAL_ERROR\";\r\n\r\nlet intialState = {\r\n\tinitialized: false,\r\n\tglobalError: null,\r\n}\r\nconst appReducer = (state = intialState, action) => {\r\n\tswitch (action.type){\r\n\t\tcase INITIALIZE_APP: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tinitialized: true,\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SAVED_GLOGAL_ERROR: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tglobalError: action.error,\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase CLEAR_GLOGAL_ERROR: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tglobalError: null,\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault: \r\n\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const initializeApp = () => {\r\n\treturn {\r\n\t\ttype:INITIALIZE_APP,\r\n\t}\r\n}\r\nexport const savedGlobalError = (error) => {\r\n\treturn {\r\n\t\ttype: SAVED_GLOGAL_ERROR,\r\n\t\terror\r\n\t}\r\n}\r\nexport const clearGlobalError = () => {\r\n\treturn {\r\n\t\ttype: CLEAR_GLOGAL_ERROR,\r\n\t}\r\n}\r\n\t//лочим боди при попапе убираем скролл\r\nconst addBodyClassLock = () => document.body.classList.add('_lock');\r\nconst removeBodyClassLock = () => document.body.classList.remove('_lock');\r\n\r\nexport const initializeAppThunk = () => (dispatch) => {\r\n\tconst promise = dispatch(authMeThunk()); /* или несколько диспатчей и промисов */\r\n\t/* dispatch(authMeThunk()); */\r\n\tPromise.all([promise])\r\n\t.then( ()=> { /* Когда придет ответ запусти наш инишиал_АС */\r\n\t\tdispatch(initializeApp());\r\n\t})\r\n}\r\n//todo для обработки ошибки запуска попапа и убирания скролла\r\nexport const handlingGlobalErrorThunk = (PromiseRejectionEvent) => (dispatch) => {\r\n\tconst reason = String(PromiseRejectionEvent.reason);\r\n\tdispatch(savedGlobalError(reason));\r\n\taddBodyClassLock();\r\n}\r\nexport const clearGlobalErrorThunk = () => (dispatch) => {\r\n\tdispatch(clearGlobalError());\r\n\tremoveBodyClassLock();\r\n}\r\n\r\nexport default appReducer;","\r\nlet initialState = {\r\n\tfriends: [\r\n\t\t{\r\n\t\t\tid: \"1\",\r\n\t\t\tname: \"Raketa\",\r\n\t\t\timage: \"http://cs622426.vk.me/v622426834/409d/baLqspYwi84.jpg\",\r\n\t\t\tonline: \"on\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"2\",\r\n\t\t\tname: \"Mivina Mivina\",\r\n\t\t\timage:\r\n\t\t\t\t\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7K1e0KwkmpYpPFLGFYejuBWA-6YMCLsrn-_Rs4MUchBIITZpVBjlAz_kJaUdUvcBp18I&usqp=CAU\",\r\n\t\t\tonline: \"off\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"3\",\r\n\t\t\tname: \"Lola Flex\",\r\n\t\t\timage:\r\n\t\t\t\t\"https://cs11.pikabu.ru/post_img/big/2020/04/12/9/1586704514168132921.png\",\r\n\t\t\tonline: \"on\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"4\",\r\n\t\t\tname: \"Ruslan Prist\",\r\n\t\t\timage:\r\n\t\t\t\t\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ3ODnhtS6QYwUbinYjsHNdfadmy7KWSJ9vNEqa_W1QWIXxSwDmo175xTs8Kaicb_e7BaQ&usqp=CAU\",\r\n\t\t\tonline: \"off\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"5\",\r\n\t\t\tname: \"Artas Minetil\",\r\n\t\t\timage:\r\n\t\t\t\t\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSAxmS6SY-5v4iZOtTcTuD83nFN0z-u28x2PDos98gyJHcLj8z8Bq2N7o0XORMnjebpwM0&usqp=CAU\",\r\n\t\t\tonline: \"on\",\r\n\t\t},\r\n\t],\r\n};\r\n\r\nconst assideReducer =(state = initialState, action)=>{\r\n\t/* пока нет данных */\r\n\treturn state;\r\n}\r\nexport default assideReducer;","import { combineReducers, createStore, applyMiddleware, compose } from \"redux\";\r\nimport profileReducer from './profile_reducer';\r\nimport dialogsReducer from './dialogs_reducer';\r\nimport assideReducer from './asside_reducer';\r\nimport usersReducer from \"./users_reducer\";\r\nimport authReduser from \"./auth_reducer\";\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport { reducer as formReducer } from 'redux-form'\r\nimport appReducer from './app_reducer';\r\n\r\n/* Наши редьюсеры */\r\n/* и наши данные имен блоков для state */\r\nlet reducersPack = combineReducers({\r\n\tprofile: profileReducer,\r\n\tdialogs: dialogsReducer,\r\n\tasside: assideReducer,\r\n\tusers: usersReducer,\r\n\tauth: authReduser,\r\n\tform: formReducer,\r\n\tapp: appReducer,\r\n});\r\n//todo Подключение для плагина\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducersPack, composeEnhancers(applyMiddleware(thunkMiddleware)));\r\n    \r\n/* let store = createStore(reducersPack, applyMiddleware(thunkMiddleware)); */\r\nwindow.__store__ = store;\r\n\r\nexport default store;","import s from './GlobalError.module.css';\r\n//todo это попап для ошибки\r\nconst GlobalError = ({globalError, clearError}) => {\r\n  return (\r\n\t<div className={s.popup}>\r\n\t<div className={s.popupContent}>\r\n\t  <div className={s.popupBody}>\r\n\t\t<div className={s.popupBlock}>{globalError}</div>\r\n\t\t<div className={s.popupClose} onClick={clearError}></div>\r\n\t  </div>\r\n\t</div>\r\n  </div>\r\n  );\r\n};\r\n\r\nexport default GlobalError;","import './App.css';\r\nimport Header from './components/Header/Header';\r\nimport Asside from './components/Asside/Asside';\r\nimport { Routes, Route, Navigate } from 'react-router-dom';\r\nimport React, { Component, Suspense } from 'react';\r\nimport { initializeAppThunk, handlingGlobalErrorThunk, clearGlobalErrorThunk } from './redux/app_reducer';\r\nimport { connect } from 'react-redux';\r\nimport Preloader from './components/global/Preloader/preloader';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport store from './redux/redux_store';\r\nimport GlobalError from './components/global/GlobalError/GlobalError';\r\n//todo lazy Loading\r\nconst Profile = React.lazy(() => import('./components/UserMain/Profile'));\r\nconst DialogsContainer = React.lazy(() => import('./components/Dialogs/DialogsContainer'));\r\nconst News = React.lazy(() => import('./components/News/News'));\r\nconst Muzic = React.lazy(() => import('./components/Muzic/Muzic'));\r\nconst Settings = React.lazy(() => import('./components/Settings/Settings'));\r\nconst UsersContainer = React.lazy(() => import('./components/Users/UsersContainer'));\r\nconst LoginContainer = React.lazy(() => import('./components/Login/LoginContainer'));\r\n\r\n\r\nclass App extends Component {\r\n\tcatchAllUnhandleErrors = (PromiseRejectionEvent) => {\r\n\t\t//? логика обработки Глобальной необработанной ошибки\r\n\t\tthis.props.handlingGlobalErrorThunk(PromiseRejectionEvent);\r\n\t}\r\n\tclearError = () => {\r\n\t\tthis.props.clearGlobalErrorThunk();\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\t/* Теперь проверка на логинизацию выполняется здесь а не в Header AuthContainer */\r\n\t\tthis.props.initializeAppThunk();\r\n\t\t//todo Глобальный обработчик ошибок с сервера\r\n\t\twindow.addEventListener('unhandledrejection', this.catchAllUnhandleErrors);\r\n\t}\r\n\tcomponentWillUnmount(){\r\n\t\twindow.removeEventListener('unhandledrejection', this.catchAllUnhandleErrors);\r\n\t}\r\n\trender(){\r\n\t\tif(!this.props.initialized) return <Preloader/>\r\n\t\treturn (\r\n\t\t\t<div className=\"app-wrapper\" role='main'>\r\n\t\t\t\t<Header />\r\n\t\t\t\t<Asside />\r\n\t\t\t\t<main className=\"main\">\r\n\t\t\t\t\t<Suspense fallback={<Preloader/>}>\r\n\t\t\t\t\t\t<Routes>\r\n\t\t\t\t\t\t\t<Route path='/' element={<Navigate to={'/profile'}/>} />\r\n\t\t\t\t\t\t\t<Route path='/profile/*' element={<Profile />} />\r\n\t\t\t\t\t\t\t<Route path='/dialogs/*' element={<DialogsContainer />} />\r\n\t\t\t\t\t\t\t<Route path='/news/*' element={<News />} />\r\n\t\t\t\t\t\t\t<Route path='/music/*' element={<Muzic />} />\r\n\t\t\t\t\t\t\t<Route path='/settings/*' element={<Settings />} />\r\n\t\t\t\t\t\t\t<Route path='/users/*' element={<UsersContainer/>} />\r\n\t\t\t\t\t\t\t<Route path='/login/*' element={<LoginContainer/>} />\r\n\t\t\t\t\t\t</Routes>\r\n\t\t\t\t\t</Suspense>\r\n\t\t\t\t\r\n\t\t\t\t</main>\r\n\t\t\t\t{(this.props.globalError) ? <GlobalError globalError={this.props.globalError} clearError={this.clearError}/> : \"\"}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\nconst mapDispathToProps = (state) => ({\r\n\tinitialized: state.app.initialized,\r\n\tglobalError: state.app.globalError,\r\n})\r\nconst AppContainer = connect(mapDispathToProps, {initializeAppThunk, handlingGlobalErrorThunk, clearGlobalErrorThunk})(App);\r\n//todo Эта глобал.обертка была создана для коррект.работы теста App\r\nlet GlobalApp = (props) => {\r\n\treturn(\r\n\t<BrowserRouter basename={process.env.PUBLIC_URL}>\r\n\t\t<Provider store={store}>\r\n\t\t\t<AppContainer />\r\n\t\t</Provider>\r\n\t</BrowserRouter>)\r\n}\r\nexport default GlobalApp;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport './index.css';\r\nimport GlobalApp from './App';\r\n\r\n\r\nReactDOM.render(\r\n\t<GlobalApp/>,\r\n\tdocument.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"GlobalError_popup__1h9Iz\",\"_active\":\"GlobalError__active__o779C\",\"popupContent\":\"GlobalError_popupContent__1bPBX\",\"popupBody\":\"GlobalError_popupBody__10YYg\",\"popupBlock\":\"GlobalError_popupBlock__15OR-\",\"popupClose\":\"GlobalError_popupClose__1oaEi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"friend\":\"Friend_friend__35RSM\",\"item\":\"Friend_item__3mmfg\",\"image\":\"Friend_image__1MYoq\",\"name\":\"Friend_name__1T6fR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"body\":\"Friends_body__1WRdj\",\"title\":\"Friends_title__1aVDp\",\"list\":\"Friends_list__DtgWk\"};","export default __webpack_public_path__ + \"static/media/Spin-1s-200px.89d7eb06.svg\";","import s from \"./preloader.module.css\";\r\nimport preloader from \"../../../assets/Spin-1s-200px.svg\";\r\nlet Preloader = (props) => {\r\n  return (\r\n    <div className={s.block}>\r\n      <img className={s.fetching} src={preloader} alt=\"\" />\r\n    </div>\r\n  );\r\n};\r\nexport default Preloader;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"preloader_block__1Ag68\",\"fetching\":\"preloader_fetching__1MjFu\"};","import { stopSubmit } from 'redux-form';\r\nimport { profileAPI } from './../api/api';\r\n\r\nconst ADD_POST = \"react_my-one-app/profile/ADD-POST\";\r\nconst SET_USER_PROFILE = \"react_my-one-app/profile/SET_USER_PROFILE\";\r\nconst SET_STATUS = \"react_my-one-app/profile/SET_STATUS\";\r\nconst DELETE_POST = \"react_my-one-app/profile/DELETE_POST\";\r\nconst SAVE_PHOTO = \"react_my-one-app/profile/SAVE_PHOTO\";\r\n\r\nlet initialState = {\r\n\tposts: [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tlikes: \"2\",\r\n\t\t\tname: \"Raketa\",\r\n\t\t\tavatar: \"http://cs622426.vk.me/v622426834/409d/baLqspYwi84.jpg\",\r\n\t\t\ttext: \"Hellow friend!\",\r\n\t\t\tlink: \"#/\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tlikes: \"8\",\r\n\t\t\tname: \"Lola Flex\",\r\n\t\t\tavatar:\r\n\t\t\t\t\"https://cs11.pikabu.ru/post_img/big/2020/04/12/9/1586704514168132921.png\",\r\n\t\t\ttext: \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam voluptates \",\r\n\t\t\tlink: \"#/\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\tlikes: \"34\",\r\n\t\t\tname: \"Fransua Ewently\",\r\n\t\t\tavatar:\r\n\t\t\t\t\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSJbnEIzrjyxxOY0epeMS4hYgqan30wNAZsIQ&usqp=CAU\",\r\n\t\t\ttext: `asperiores nobis, temporibus consequatur ipsa incidunt tempore quam deleniti eum quisquam excepturi quis omnis officiis quas officia illum placeat dolorum?`,\r\n\t\t\tlink: \"#/\",\r\n\t\t},\r\n\t],\r\n\tprofile: null,\r\n\tstatus: \"\",\r\n};\r\n\r\nconst profileReducer =(state = initialState, action)=>{\r\n\tswitch (action.type) {\r\n\t\tcase ADD_POST: {\r\n\t\t\tif (state.profile){\r\n\t\t\t\tlet newPost = {\r\n\t\t\t\t\t/* id: 4, */\r\n\t\t\t\t\tid: state.posts.length +1,\r\n\t\t\t\t\tlikes: 0,\r\n\t\t\t\t\tname: state.profile.fullName ? state.profile.fullName : \"Nou Name\",\r\n\t\t\t\t\tavatar: state.profile.photos.large ? state.profile.photos.large :\"https://i0.wp.com/slovami.net/wp-content/uploads/2018/04/1-36-1024x1024.jpg\",\r\n\t\t\t\t\ttext: action.text,\r\n\t\t\t\t\tlink: `/profile/${state.profile.userId}`,\r\n\t\t\t\t}\r\n\t\t\t\treturn {...state,\r\n\t\t\t\t\tposts: [...state.posts, newPost],\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\telse return alert(\"Кто вы?\");\r\n\t\t}\r\n\t\tcase SET_USER_PROFILE: {\r\n\t\t\treturn {...state,\r\n\t\t\t\tprofile: action.profile,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase SET_STATUS: {\r\n\t\t\treturn {...state,\r\n\t\t\t\tstatus: action.status,\r\n\t\t\t};\r\n\t\t}\r\n\t\tcase DELETE_POST: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tposts: state.posts.filter(p => p.id !== action.id)\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SAVE_PHOTO: {\r\n\t\t\treturn{\r\n\t\t\t\t...state,\r\n\t\t\t\tprofile: {...state.profile, photos: action.photos}\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\nexport const newPostActionCreator = (text) =>{\r\n\treturn {\r\n\t\ttype:ADD_POST,\r\n\t\ttext\r\n\t}\r\n};\r\nexport const setUserProfile = (profile) =>{\r\n\treturn {\r\n\t\ttype:SET_USER_PROFILE,\r\n\t\tprofile\r\n\t}\r\n};\r\nexport const setStatus = (status) =>{\r\n\treturn {\r\n\t\ttype:SET_STATUS,\r\n\t\tstatus\r\n\t}\r\n};\r\nexport const deletePostAC = (id) =>{\r\n\treturn{\r\n\t\ttype: DELETE_POST,\r\n\t\tid\r\n\t}\r\n}\r\n/* после санки загрузки фото обновим его*/\r\nexport const savePhotoSuccsess = (photos) =>{\r\n\treturn{\r\n\t\ttype: SAVE_PHOTO,\r\n\t\tphotos\r\n\t}\r\n}\r\n/* Thusks */\r\nexport const getProfileThusk = (userId) => {\r\n\treturn async (dispatch) => {\r\n\t\tlet data = await profileAPI.getProfile(userId)\r\n\t\tif(data){\r\n\t\t\t//debugger\r\n\t\t\tdispatch(setUserProfile(data.data));\r\n\t\t}\r\n\t}\r\n}\r\nexport const setStatusThusk = (userId) => {\r\n\treturn async (dispatch) => {\r\n\t\tlet data = await profileAPI.getStatus(userId)\r\n\t\tif(data){\r\n\t\t\tdispatch(setStatus(data.data));\r\n\t\t}\r\n\t}\r\n}\r\nexport const updateStatusThusk = (status) => {\r\n\treturn async (dispatch) => {\r\n\t\tlet data = await profileAPI.updateStatus(status);\r\n\t\tif(data){\r\n\t\t\tif(data.data.resultCode === 0){\r\n\t\t\t\tdispatch(setStatus(status));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport const savePhotoThunk = (photo) => {\r\n\treturn async (dispatch) => {\r\n\t\tlet data = await profileAPI.updateAvatar(photo)\r\n\t\tif(data){\r\n\t\t\tif(data.data.resultCode === 0){\r\n\t\t\t\tdispatch(savePhotoSuccsess(data.data.data.photos))\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport const setFormThunk = (formData) =>{\r\n\t//! если редюсер видит dispatch, то он увидит и getState\r\n\treturn async (dispatch, getState) => {\r\n\t\tconst userId = getState().auth.id;\r\n\t\tconst data = await profileAPI.setForm(formData)\r\n\t\tif(data){\r\n\t\t\tif(data.data.resultCode === 0){\r\n\t\t\t\tdispatch(getProfileThusk(userId));\r\n\t\t\t} else {\r\n\t\t\t\tconst message = data.data.messages.length > 0 ? data.data.messages[0] : \"Some error\";\r\n\t\t\t\t//общая ошибка\r\n\t\t\t\tdispatch(stopSubmit(\"profile\", {_error: message}));\r\n\t\t\t\treturn Promise.reject(message);\r\n\t\t\t\t//todo ошибка поля\r\n\t\t\t\t/* dispatch(stopSubmit(\"profile\", {\"contacts\":{\"twitter\": message}})); */\r\n\t\t\t\t/* let{textError, section, subSection} = getFormatErrors(message);\r\n\t\t\t\tdispatch(stopSubmit(\"profile\", {[section]:{[subSection]: textError}}));\r\n\t\t\t\tdebugger */\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n//todo функция извлечения значений поля из ошибки\r\n// Invalid url format (Contacts->Twitter)\r\n/* const getFormatErrors = (message) =>{\r\n\tlet formaterMessage = message.split(/\\(/);\r\n\tconst textError = formaterMessage[0].trim();\r\n\tconst twoSplit = formaterMessage[1].split(/\\)/);\r\n\tconst sectionSubsection = twoSplit[0].trim().split(/\\->/);\r\n\tconst section = sectionSubsection[0].trim();\r\n\tconst subSection = sectionSubsection[1].trim();\r\n\treturn {textError, section, subSection}\r\n} */\r\n/* getFormatErrors(\"Invalid url format (Contacts->Twitter)\"); */\r\n\r\nexport default profileReducer;","const axios = require(\"axios\");\r\n\r\nconst instance = axios.create({\r\n\tbaseURL: \"https://social-network.samuraijs.com/api/1.0/\",\r\n\twithCredentials: true, \r\n\theaders:{\"API-KEY\": \"408e3826-292f-4228-986e-4b5b9de1ce18\"},\r\n});\r\n\r\n/* создание одного общего обьекта с методами */\r\nexport const usersAPI = {\r\n\tgetUsers (activePage = 1, pageSize = 10) {\r\n\t\treturn instance\r\n\t\t.get(`users?page=${activePage}&count=${pageSize}`)\r\n\t\t.then((response) =>{\r\n\t\t\treturn response.data;\r\n\t\t})\r\n\t},\r\n}\r\nexport const profileAPI = {\r\n\tgetProfile (id) {\r\n\t\treturn instance\r\n\t\t.get(`profile/${id}`)\r\n\t},\r\n\tgetStatus (id) {\r\n\t\treturn instance\r\n\t\t.get(`profile/status/${id}`)\r\n\t},\r\n\tupdateStatus (status) {\r\n\t\treturn instance\r\n\t\t.put(`profile/status`, {status})\r\n\t},\r\n\tupdateAvatar (photo) {\r\n\t\t//todo отправка файла на сервер имеет свои особенности\r\n\t\tconst formData = new FormData();\r\n\t\tformData.append(\"image\", photo);\r\n\r\n\t\treturn instance\r\n\t\t.put(`profile/photo`, formData, {\r\n\t\t\theaders: {\r\n\t\t\t  'Content-Type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tsetForm(profile){\r\n\t\treturn instance\r\n\t\t.put(`profile`, profile)\r\n\t},\r\n}\r\nexport const followAPI = {\r\n\tunfollowApi (id) {\r\n\t\treturn instance\r\n\t\t.delete(`follow/${id}`)\r\n\t   .then(response =>{\r\n\t\t\treturn response.data;\r\n\t   })\r\n\t},\r\n\tfollowApi (id) {\r\n\t\treturn instance\r\n\t\t.post(`follow/${id}`)\r\n\t   .then(response =>{\r\n\t\t\treturn response.data;\r\n\t   })\r\n\t},\r\n}\r\nexport const authAPI = {\r\n\tauthMeApi () {\r\n\t\treturn instance\r\n\t\t.get(`auth/me`)\r\n\t   .then(response =>{\r\n\t\t\treturn response.data;\r\n\t   })\r\n\t},\r\n\tauthMeGetProfileApi (id) {\r\n\t\treturn instance\r\n\t\t.get(`profile/${id}`)\r\n\t   .then(response =>{\r\n\t\t\treturn response.data;\r\n\t   })\r\n\t},\r\n\t/* авторизация */\r\n\tautchMeLoginApi (email, password, rememberMe, captcha) {\r\n\t\treturn instance\r\n\t\t.post(`/auth/login`, {email, password, rememberMe, captcha})\r\n\t\t.then(response =>{\r\n\t\t\treturn response.data;\r\n\t   })\r\n\t},\r\n\tLogoutApi () {\r\n\t\treturn instance\r\n\t\t.delete(`/auth/login`); /* сервер удалит куку */\r\n\t}\r\n}\r\nexport const securityAPI = {\r\n\t/* капча */\r\n\tgetCaptchaUrl () {\r\n\t\treturn instance\r\n\t\t.get(`/security/get-captcha-url`);\r\n\t}\r\n}","const ADD_MESSAGE = \"react_my-one-app/dialogs/ADD-MESSAGE\";\r\n\r\nlet initialState = {\r\n\tmessages: [\r\n\t\t{\r\n\t\t\tid: \"1\",\r\n\t\t\timage: \"http://cs622426.vk.me/v622426834/409d/baLqspYwi84.jpg\",\r\n\t\t\tlink: \"#/\",\r\n\t\t\tposition: \"left\",\r\n\t\t\tmessage: `Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsum, nulla.\r\n\t\t  Error magni ipsa inventore consectetur rerum, accusamus molestias sit\r\n\t\t  quisquam distinctio eius obcaecati debitis tempore modi animi\r\n\t\t  consequuntur dicta quo.`,\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"2\",\r\n\t\t\timage: \"http://cs622426.vk.me/v622426834/409d/baLqspYwi84.jpg\",\r\n\t\t\tlink: \"#/\",\r\n\t\t\tposition: \"right\",\r\n\t\t\tmessage: `Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsum, nulla.`,\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"3\",\r\n\t\t\timage: \"http://cs622426.vk.me/v622426834/409d/baLqspYwi84.jpg\",\r\n\t\t\tlink: \"#/\",\r\n\t\t\tposition: \"left\",\r\n\t\t\tmessage: `Lorem ipsum dolor sit amet consectetur adipisicing elit. Ipsum, nulla.\r\n\t\t  Error magni ipsa inventore consectetur rerum, accusamus molestias sit\r\n\t\t  quisquam distinctio eius obcaecati debitis tempore modi animi\r\n\t\t  consequuntur dicta quo Error magni ipsa inventore consectetur rerum,\r\n\t\t  accusamus molestias sit quisquam distinctio eius obcaecati debitis\r\n\t\t  tempore modi animi consequuntur dicta quo.`,\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"4\",\r\n\t\t\timage: \"http://cs622426.vk.me/v622426834/409d/baLqspYwi84.jpg\",\r\n\t\t\tlink: \"#/\",\r\n\t\t\tposition: \"right\",\r\n\t\t\tmessage: `I heal in raids, inexpensive! Fast healing without problems! Help and leveling characters!`,\r\n\t\t},\r\n\t],\r\n\tdialogs: [\r\n\t\t{\r\n\t\t\tid: \"1\",\r\n\t\t\tname: \"Raketa\",\r\n\t\t\timage: \"http://cs622426.vk.me/v622426834/409d/baLqspYwi84.jpg\",\r\n\t\t\ttext: \"Hellow dear friend!\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"2\",\r\n\t\t\tname: \"Mivina Mivina\",\r\n\t\t\timage:\r\n\t\t\t\t\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT7K1e0KwkmpYpPFLGFYejuBWA-6YMCLsrn-_Rs4MUchBIITZpVBjlAz_kJaUdUvcBp18I&usqp=CAU\",\r\n\t\t\ttext: \"Hi. I am the best of the best paladin!\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"3\",\r\n\t\t\tname: \"Lola Flex\",\r\n\t\t\timage:\r\n\t\t\t\t\"https://cs11.pikabu.ru/post_img/big/2020/04/12/9/1586704514168132921.png\",\r\n\t\t\ttext: \"Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam voluptates \",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: \"4\",\r\n\t\t\tname: \"Ruslan Prist\",\r\n\t\t\timage:\r\n\t\t\t\t\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ3ODnhtS6QYwUbinYjsHNdfadmy7KWSJ9vNEqa_W1QWIXxSwDmo175xTs8Kaicb_e7BaQ&usqp=CAU\",\r\n\t\t\ttext: \"I heal in raids, inexpensive! Fast healing without problems! Help and leveling characters!\",\r\n\t\t},\r\n\t],\r\n};\r\n\r\nconst dialogsReducer =(state = initialState, action)=>{\r\n\r\n\tswitch(action.type) {\r\n\t\tcase ADD_MESSAGE: {\r\n\t\t\tlet newMessage = {\r\n\t\t\t\tid: \"5\",\r\n\t\t\t\timage: \"http://cs622426.vk.me/v622426834/409d/baLqspYwi84.jpg\",\r\n\t\t\t\tlink: \"#/\",\r\n\t\t\t\tposition: \"right\",\r\n\t\t\t\tmessage: action.text,\r\n\t\t\t}\r\n\t\t\treturn {...state,\r\n\t\t\t\tmessages: [...state.messages, newMessage],\r\n\t\t\t};\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\nexport const newMessageActionCreator = (text) =>{\r\n\treturn {\r\n\t\ttype:ADD_MESSAGE,\r\n\t\ttext\r\n\t}\r\n};\r\n\r\nexport default dialogsReducer;","export const mapItemsUpdateHelper = (items, keys, itemId, newObjectProps) => {\r\n\t//откуда/кому/что/и что дальше применить\r\n\treturn items.map(u => {\r\n\t\tif ( u[keys] === itemId){\r\n\t\t\treturn {...u, ...newObjectProps}\r\n\t\t}\r\n\t\treturn u;\r\n\t})\r\n}","import { mapItemsUpdateHelper } from '../utils/validators/object-helpers';\r\nimport { usersAPI, followAPI } from './../api/api';\r\nconst FOLLOW = \"react_my-one-app/users/FOLLOW\";\r\nconst UNFOLLOW = \"react_my-one-app/users/UNFOLLOW\";\r\nconst SET_USERS = \"react_my-one-app/users/SET_USERS\";\r\nconst SET_ACTIVE_PAGE = \"react_my-one-app/users/SET_ACTIVE_PAGE\";\r\nconst SET_TOTAL_USERS_COUNT = \"react_my-one-app/users/SET_TOTAL_USERS_COUNT\";\r\nconst TOGGEL_FETCHING = \"react_my-one-app/users/TOGGEL_FETCHING\";\r\nconst FOLLOWING_DISABLE = \"react_my-one-app/users/FOLLOWING_DISABLE\";\r\n\r\nlet initialState = {\r\n\tusers: [],\r\n\ttotalUsersCount: 0,\r\n\tpageSize: 10,\r\n\tactivePage: 1,\r\n\tisfetching: true,\r\n\tisDisabled: [], /* блокировка нажатой кнопки */\r\n\tmaxbaselight: 20,/* количество точек пагинации страниц */\r\n/* \tusers: [\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tname: \"Alex\",\r\n\t\t\tstatus: \"введен Э. Эвансом в его »\",\r\n\t\t\tadress: {\r\n\t\t\t\tcountry: \"Italy\",\r\n\t\t\t\tcity: \"Barselona\",\r\n\t\t\t},\r\n\t\t\tavatar: \"https://ava-24.com/_ph/98/563228947.jpg\",\r\n\t\t\tisfollow: true,\r\n\t\t\tlink: \"#/\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tname: \"Dimon\",\r\n\t\t\tstatus: \"введен Э. Эвансом в его книге с таким же названием «Domain-Driven Design. введен Э. Эвансом в его книге с таким же названием «Domain-Driven Design»\",\r\n\t\t\tadress: {\r\n\t\t\t\tcountry: \"Italy\",\r\n\t\t\t\tcity: \"Barselona\",\r\n\t\t\t},\r\n\t\t\tavatar: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSGte8KLfMOmnVn67KS6LldaFP0XWAMfTKNJQ&usqp=CAU\",\r\n\t\t\tisfollow: false,\r\n\t\t\tlink: \"#/\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\tname: \"Tonny Gat\",\r\n\t\t\tstatus: \"введен Э. Эвансом в его книге с таким же названием «Domain-Driven Design»\",\r\n\t\t\tadress: {\r\n\t\t\t\tcountry: \"Italy\",\r\n\t\t\t\tcity: \"Barselona\",\r\n\t\t\t},\r\n\t\t\tavatar: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSh36h4s7bAqe7En8FdKfKJ1MUax-E0WdCmdQ&usqp=CAU\",\r\n\t\t\tisfollow: true,\r\n\t\t\tlink: \"#/\",\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4,\r\n\t\t\tname: \"Silver Stowm\",\r\n\t\t\tstatus: \"Всем привет друзья! Жду вас в рейдах!\",\r\n\t\t\tadress: {\r\n\t\t\t\tcountry: \"Italy\",\r\n\t\t\t\tcity: \"Barselona\",\r\n\t\t\t},\r\n\t\t\tavatar: \"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR0pLSGspy6-x9Ih29O3aEP1_Y3ZITOWgh2oA&usqp=CAU\",\r\n\t\t\tisfollow: false,\r\n\t\t\tlink: \"#/\",\r\n\t\t},\r\n\t], */\r\n}\r\nconst usersReducer = (state = initialState, action) =>{\r\n\tswitch (action.type) {\r\n\t\tcase FOLLOW: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: mapItemsUpdateHelper(state.users, \"id\", action.userid, {followed: true}),\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase UNFOLLOW: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: mapItemsUpdateHelper(state.users, \"id\", action.userid, {followed: false}),\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SET_USERS: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tusers: action.users\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SET_ACTIVE_PAGE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tactivePage: action.page,\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase SET_TOTAL_USERS_COUNT: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\ttotalUsersCount: action.usersCount,\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase TOGGEL_FETCHING: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisfetching: action.isfetching,\r\n\t\t\t}\r\n\t\t}\r\n\t\tcase FOLLOWING_DISABLE: {\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tisDisabled: action.isfetching ? [...state.isDisabled, action.id ] : state.isDisabled.filter((id) => id !== action.id),\r\n\t\t\t}\r\n\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n\r\n}\r\n\r\n/* action Creators */\r\nexport const setUsers = (users) =>{\r\n\treturn {\r\n\t\ttype: SET_USERS,\r\n\t\tusers\r\n\t}\r\n}\r\nexport const follow = (userid) =>{\r\n\treturn {\r\n\t\ttype: FOLLOW,\r\n\t\tuserid\r\n\t}\r\n}\r\nexport const unfollow = (userid) =>{\r\n\treturn {\r\n\t\ttype: UNFOLLOW,\r\n\t\tuserid\r\n\t}\r\n}\r\nexport const setActivePage = (page) =>{\r\n\treturn {\r\n\t\ttype: SET_ACTIVE_PAGE,\r\n\t\tpage\r\n\t}\r\n}\r\nexport const setTotalUsersCount = (usersCount) =>{\r\n\treturn {\r\n\t\ttype: SET_TOTAL_USERS_COUNT,\r\n\t\tusersCount\r\n\t}\r\n}\r\nexport const toggelFetching = (isfetching) =>{\r\n\treturn {\r\n\t\ttype: TOGGEL_FETCHING,\r\n\t\tisfetching\r\n\t}\r\n}\r\nexport const toggelFollowDisable = (isfetching, id) =>{\r\n\treturn {\r\n\t\ttype: FOLLOWING_DISABLE,\r\n\t\tisfetching,\r\n\t\tid\r\n\t}\r\n}\r\n/* Thunks */\r\nexport const getUsersThunk = (activePage, pageSize) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(toggelFetching(true));\r\n\t\tlet data = await usersAPI.getUsers(activePage, pageSize);\r\n\t\t  if(data) {\r\n\t\t\tdispatch(toggelFetching(false));\r\n\t\t\tdispatch(setUsers(data.items));\r\n\t\t\tdispatch(setTotalUsersCount(data.totalCount));\r\n\t\t  };\r\n\t}\r\n}\r\nexport const getUsersActivePageThunk = (page, pageSize) => {\r\n\treturn async (dispatch) => {\r\n\t\tdispatch(toggelFetching(true));\r\n\t\tdispatch(setActivePage(page));\r\n\t\tlet data = await usersAPI.getUsers(page, pageSize);\r\n\t\tif(data) {\r\n\t\t\tdispatch(toggelFetching(false));\r\n\t\t\tdispatch(setUsers(data.items));\r\n\t\t};\r\n\t}\r\n}\r\n//todo выносим общую логику в методах подписки\r\n\tconst followUnfollowFlow = async (dispatch, id, apiMethod, actionCreator) =>{\r\n\t\tdispatch(toggelFollowDisable(true, id));\r\n\t\tlet data = await apiMethod(id);\r\n\t\tif (data.resultCode === 0){\r\n\t\t\tdispatch(actionCreator(id))\r\n\t\t}\r\n\t\tdispatch(toggelFollowDisable(false, id));\r\n\t}\r\n//todo\r\nexport const followThunk = (id) => {\r\n\treturn async (dispatch) => {\r\n\t\tlet apiMethod = followAPI.followApi.bind(followAPI);\r\n\t\tfollowUnfollowFlow(dispatch, id, apiMethod, follow);\r\n\t}\r\n}\r\nexport const unfollowThunk = (id) => {\r\n\treturn async (dispatch) => {\r\n\t\tlet apiMethod = followAPI.unfollowApi.bind(followAPI);\r\n\t\tfollowUnfollowFlow(dispatch, id, apiMethod, unfollow);\r\n\t}\r\n}\r\nexport default usersReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"asside\":\"Asside_asside__3hFkF\"};"],"sourceRoot":""}